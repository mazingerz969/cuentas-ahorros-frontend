import{e as c,g as h,h as l,k as r,m as a,p,s as m,va as d}from"./chunk-WWV2B3DV.js";var b={production:!0,apiUrl:"https://cuentas-ahorros-backend-production.up.railway.app/api"};var P=(()=>{let s=class s{constructor(t){this.http=t,this.API_URL=b.apiUrl,this.cuentasSubject=new c([]),this.cuentas$=this.cuentasSubject.asObservable(),this.cargarCuentas()}obtenerCuentas(){return this.http.get(`${this.API_URL}/cuentas`).pipe(a(t=>{console.log("Cuentas obtenidas:",t),this.cuentasSubject.next(t)}),r(this.manejarError))}obtenerCuentaPorId(t){return this.http.get(`${this.API_URL}/cuentas/${t}`).pipe(a(e=>console.log("Cuenta obtenida:",e)),r(this.manejarError))}obtenerCuentaPorNumero(t){return this.http.get(`${this.API_URL}/cuentas/numero/${t}`).pipe(a(e=>console.log("Cuenta obtenida por n\xFAmero:",e)),r(this.manejarError))}buscarCuentasPorTitular(t){return this.http.get(`${this.API_URL}/cuentas/buscar?titular=${t}`).pipe(a(e=>console.log("Cuentas encontradas por titular:",e)),r(this.manejarError))}obtenerCuentasActivas(){return this.http.get(`${this.API_URL}/cuentas/activas`).pipe(a(t=>console.log("Cuentas activas obtenidas:",t)),r(this.manejarError))}crearCuenta(t){return this.http.post(`${this.API_URL}/cuentas`,t).pipe(a(e=>{console.log("Cuenta creada:",e);let n=this.cuentasSubject.value;this.cuentasSubject.next([...n,e])}),r(this.manejarError))}actualizarCuenta(t,e){return this.http.put(`${this.API_URL}/cuentas/${t}`,e).pipe(a(n=>{console.log("Cuenta actualizada:",n);let j=this.cuentasSubject.value.map(u=>u.id===t?n:u);this.cuentasSubject.next(j)}),r(this.manejarError))}eliminarCuenta(t){return this.http.delete(`${this.API_URL}/cuentas/${t}`).pipe(a(()=>{console.log("Cuenta eliminada con ID:",t);let n=this.cuentasSubject.value.filter(i=>i.id!==t);this.cuentasSubject.next(n)}),r(this.manejarError))}obtenerEstadisticas(){return this.http.get(`${this.API_URL}/cuentas/estadisticas`).pipe(l(t=>({totalCuentas:t[0],cuentasActivas:t[1],saldoTotal:t[2]})),a(t=>console.log("Estad\xEDsticas obtenidas:",t)),r(this.manejarError))}obtenerCuentasOrdenadasPorSaldo(){return this.http.get(`${this.API_URL}/cuentas/ordenadas/saldo`).pipe(a(t=>console.log("Cuentas ordenadas por saldo:",t)),r(this.manejarError))}obtenerCuentasConSaldoSuperiorAlPromedio(){return this.http.get(`${this.API_URL}/cuentas/superior-promedio`).pipe(a(t=>console.log("Cuentas con saldo superior al promedio:",t)),r(this.manejarError))}cargarCuentas(){this.obtenerCuentas().subscribe({error:t=>console.error("Error al cargar cuentas:",t)})}manejarError(t){let e="Ocurri\xF3 un error desconocido";return t.error instanceof ErrorEvent?e=`Error: ${t.error.message}`:(e=`C\xF3digo de error: ${t.status}
Mensaje: ${t.message}`,t.error&&t.error.message&&(e=t.error.message)),console.error("Error en CuentaService:",e),h(()=>new Error(e))}getCuentasActuales(){return this.cuentasSubject.value}actualizarCuentas(t){this.cuentasSubject.next(t)}};s.\u0275fac=function(e){return new(e||s)(m(d))},s.\u0275prov=p({token:s,factory:s.\u0275fac,providedIn:"root"});let o=s;return o})();export{b as a,P as b};
