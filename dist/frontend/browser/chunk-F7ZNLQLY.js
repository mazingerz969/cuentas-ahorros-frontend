import{b as y,c as p,d as E,e as S,h as F,j as w,k as I,q as L,s as k}from"./chunk-J3XXRJ3Z.js";import{a as T}from"./chunk-7O5VV4DI.js";import{B as a,E as f,G as b,K as m,T as s,U as n,V as t,W as _,Y as h,Z as x,_ as C,aa as l,ca as v,qa as M,sa as P,za as O}from"./chunk-WWV2B3DV.js";function z(e,g){if(e&1&&(n(0,"div",15),l(1),t()),e&2){let c=x();a(),v(" ",c.getErrorMessage("email")," ")}}function N(e,g){if(e&1&&(n(0,"div",15),l(1),t()),e&2){let c=x();a(),v(" ",c.getErrorMessage("password")," ")}}function D(e,g){if(e&1&&(n(0,"div",16),l(1),t()),e&2){let c=x();a(),v(" ",c.errorMessage," ")}}function G(e,g){e&1&&(n(0,"span"),l(1,"Iniciar Sesi\xF3n"),t())}function j(e,g){e&1&&(n(0,"span"),l(1,"Iniciando..."),t())}var $=(()=>{let g=class g{constructor(r,i,o){this.fb=r,this.usuarioService=i,this.router=o,this.errorMessage="",this.isLoading=!1,this.loginForm=this.fb.group({email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]]})}onSubmit(){this.loginForm.valid?(this.isLoading=!0,this.errorMessage="",this.usuarioService.login(this.loginForm.value).subscribe({next:r=>{console.log("Login exitoso:",r),this.router.navigate(["/dashboard"])},error:r=>{console.error("Error en login:",r),this.errorMessage=r.error||"Error al iniciar sesi\xF3n",this.isLoading=!1},complete:()=>{this.isLoading=!1}})):this.markFormGroupTouched()}markFormGroupTouched(){Object.keys(this.loginForm.controls).forEach(r=>{this.loginForm.get(r)?.markAsTouched()})}getErrorMessage(r){let i=this.loginForm.get(r);if(i?.errors&&i.touched){if(i.errors.required)return`${r==="email"?"El email":"La contrase\xF1a"} es obligatorio`;if(i.errors.email)return"El email no es v\xE1lido";if(i.errors.minlength)return"La contrase\xF1a debe tener al menos 6 caracteres"}return""}};g.\u0275fac=function(i){return new(i||g)(f(L),f(T),f(O))},g.\u0275cmp=b({type:g,selectors:[["app-login"]],decls:27,vars:11,consts:[[1,"login-container"],[1,"login-card"],[1,"login-header"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email","placeholder","tu@email.com"],["class","error-message",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password","placeholder","Tu contrase\xF1a"],["class","error-message global-error",4,"ngIf"],["type","submit",1,"login-button",3,"disabled"],[4,"ngIf"],[1,"login-footer"],["routerLink","/registro"],[1,"error-message"],[1,"error-message","global-error"]],template:function(i,o){if(i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),l(4,"Iniciar Sesi\xF3n"),t(),n(5,"p"),l(6,"Accede a tu cuenta de ahorros"),t()(),n(7,"form",3),h("ngSubmit",function(){return o.onSubmit()}),n(8,"div",4)(9,"label",5),l(10,"Email"),t(),_(11,"input",6),m(12,z,2,1,"div",7),t(),n(13,"div",4)(14,"label",8),l(15,"Contrase\xF1a"),t(),_(16,"input",9),m(17,N,2,1,"div",7),t(),m(18,D,2,1,"div",10),n(19,"button",11),m(20,G,2,0,"span",12)(21,j,2,0,"span",12),t()(),n(22,"div",13)(23,"p"),l(24,"\xBFNo tienes cuenta? "),n(25,"a",14),l(26,"Reg\xEDstrate aqu\xED"),t()()()()()),i&2){let d,u;a(7),s("formGroup",o.loginForm),a(4),C("error",((d=o.loginForm.get("email"))==null?null:d.invalid)&&((d=o.loginForm.get("email"))==null?null:d.touched)),a(),s("ngIf",o.getErrorMessage("email")),a(4),C("error",((u=o.loginForm.get("password"))==null?null:u.invalid)&&((u=o.loginForm.get("password"))==null?null:u.touched)),a(),s("ngIf",o.getErrorMessage("password")),a(),s("ngIf",o.errorMessage),a(),s("disabled",o.loginForm.invalid||o.isLoading),a(),s("ngIf",!o.isLoading),a(),s("ngIf",o.isLoading)}},dependencies:[P,M,k,F,y,E,S,w,I],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px;background:linear-gradient(135deg,var(--primary-color),var(--secondary-color))}.login-card[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:12px;box-shadow:0 8px 32px #0000001a;padding:40px;width:100%;max-width:400px;border:1px solid var(--border-color)}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.login-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-primary);margin:0 0 8px;font-size:28px;font-weight:600}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0;font-size:14px}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:var(--text-primary);font-weight:500;font-size:14px}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid var(--border-color);border-radius:8px;font-size:16px;background:var(--input-bg);color:var(--text-primary);transition:all .3s ease}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px rgba(var(--primary-color-rgb),.1)}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%]{border-color:var(--error-color)}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--text-secondary)}.login-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:var(--error-color);font-size:12px;margin-top:4px;display:flex;align-items:center;gap:4px}.login-form[_ngcontent-%COMP%]   .error-message.global-error[_ngcontent-%COMP%]{background:rgba(var(--error-color-rgb),.1);padding:12px;border-radius:6px;margin-bottom:16px;font-size:14px}.login-form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]{width:100%;padding:14px;background:var(--primary-color);color:#fff;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;margin-top:10px}.login-form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary-hover);transform:translateY(-1px)}.login-form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]:disabled{background:var(--disabled-color);cursor:not-allowed;transform:none}.login-footer[_ngcontent-%COMP%]{text-align:center;margin-top:24px;padding-top:20px;border-top:1px solid var(--border-color)}.login-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0;font-size:14px}.login-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:500}.login-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 480px){.login-container[_ngcontent-%COMP%]{padding:16px}.login-card[_ngcontent-%COMP%]{padding:24px}.login-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px}}"]});let e=g;return e})();export{$ as LoginComponent};
