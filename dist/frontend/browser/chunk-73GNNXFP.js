import{b as F,c as d,d as S,e as I,h as k,j as L,k as R,q as T,s as N}from"./chunk-J3XXRJ3Z.js";import{a as z}from"./chunk-7O5VV4DI.js";import{B as t,E as h,G as P,K as p,T as m,U as i,V as o,W as v,Y as O,Z as u,_ as x,aa as s,c as M,ca as f,qa as w,sa as E,za as y}from"./chunk-WWV2B3DV.js";function D(r,l){if(r&1&&(i(0,"div",20),s(1),o()),r&2){let g=u();t(),f(" ",g.getErrorMessage("nombre")," ")}}function q(r,l){if(r&1&&(i(0,"div",20),s(1),o()),r&2){let g=u();t(),f(" ",g.getErrorMessage("email")," ")}}function j(r,l){if(r&1&&(i(0,"div",20),s(1),o()),r&2){let g=u();t(),f(" ",g.getErrorMessage("password")," ")}}function G(r,l){if(r&1&&(i(0,"div",20),s(1),o()),r&2){let g=u();t(),f(" ",g.getErrorMessage("confirmPassword")," ")}}function V(r,l){if(r&1&&(i(0,"div",21),s(1),o()),r&2){let g=u();t(),f(" ",g.errorMessage," ")}}function A(r,l){if(r&1&&(i(0,"div",22),s(1),o()),r&2){let g=u();t(),f(" ",g.successMessage," ")}}function $(r,l){r&1&&(i(0,"span"),s(1,"Crear Cuenta"),o())}function B(r,l){r&1&&(i(0,"span"),s(1,"Creando cuenta..."),o())}var X=(()=>{let l=class l{constructor(a,n,e){this.fb=a,this.usuarioService=n,this.router=e,this.errorMessage="",this.successMessage="",this.isLoading=!1,this.registroForm=this.fb.group({nombre:["",[d.required,d.minLength(2)]],email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]],confirmPassword:["",[d.required]]},{validators:this.passwordMatchValidator})}passwordMatchValidator(a){let n=a.get("password"),e=a.get("confirmPassword");return n&&e&&n.value!==e.value?(e.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):(e?.errors?.passwordMismatch&&(delete e.errors.passwordMismatch,Object.keys(e.errors).length===0&&e.setErrors(null)),null)}onSubmit(){if(this.registroForm.valid){this.isLoading=!0,this.errorMessage="",this.successMessage="";let a=this.registroForm.value,{confirmPassword:n}=a,e=M(a,["confirmPassword"]);this.usuarioService.registrar(e).subscribe({next:c=>{console.log("Registro exitoso:",c),this.successMessage="\xA1Registro exitoso! Redirigiendo al login...",setTimeout(()=>{this.router.navigate(["/login"])},2e3)},error:c=>{console.error("Error en registro:",c),this.errorMessage=c.error||"Error al registrar usuario",this.isLoading=!1},complete:()=>{this.isLoading=!1}})}else this.markFormGroupTouched()}markFormGroupTouched(){Object.keys(this.registroForm.controls).forEach(a=>{this.registroForm.get(a)?.markAsTouched()})}getErrorMessage(a){let n=this.registroForm.get(a);if(n?.errors&&n.touched){if(n.errors.required)return`${this.getFieldName(a)} es obligatorio`;if(n.errors.email)return"El email no es v\xE1lido";if(n.errors.minlength){let e=n.errors.minlength.requiredLength;return`${this.getFieldName(a)} debe tener al menos ${e} caracteres`}if(n.errors.passwordMismatch)return"Las contrase\xF1as no coinciden"}return""}getFieldName(a){return{nombre:"El nombre",email:"El email",password:"La contrase\xF1a",confirmPassword:"La confirmaci\xF3n de contrase\xF1a"}[a]||a}};l.\u0275fac=function(n){return new(n||l)(h(T),h(z),h(y))},l.\u0275cmp=P({type:l,selectors:[["app-registro"]],decls:38,vars:18,consts:[[1,"registro-container"],[1,"registro-card"],[1,"registro-header"],[1,"registro-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","formControlName","nombre","placeholder","Tu nombre completo"],["class","error-message",4,"ngIf"],["for","email"],["type","email","id","email","formControlName","email","placeholder","tu@email.com"],["for","password"],["type","password","id","password","formControlName","password","placeholder","M\xEDnimo 6 caracteres"],["for","confirmPassword"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","Repite tu contrase\xF1a"],["class","error-message global-error",4,"ngIf"],["class","success-message",4,"ngIf"],["type","submit",1,"registro-button",3,"disabled"],[4,"ngIf"],[1,"registro-footer"],["routerLink","/login"],[1,"error-message"],[1,"error-message","global-error"],[1,"success-message"]],template:function(n,e){if(n&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),s(4,"Crear Cuenta"),o(),i(5,"p"),s(6,"\xDAnete a nuestra plataforma de ahorros"),o()(),i(7,"form",3),O("ngSubmit",function(){return e.onSubmit()}),i(8,"div",4)(9,"label",5),s(10,"Nombre Completo"),o(),v(11,"input",6),p(12,D,2,1,"div",7),o(),i(13,"div",4)(14,"label",8),s(15,"Email"),o(),v(16,"input",9),p(17,q,2,1,"div",7),o(),i(18,"div",4)(19,"label",10),s(20,"Contrase\xF1a"),o(),v(21,"input",11),p(22,j,2,1,"div",7),o(),i(23,"div",4)(24,"label",12),s(25,"Confirmar Contrase\xF1a"),o(),v(26,"input",13),p(27,G,2,1,"div",7),o(),p(28,V,2,1,"div",14)(29,A,2,1,"div",15),i(30,"button",16),p(31,$,2,0,"span",17)(32,B,2,0,"span",17),o()(),i(33,"div",18)(34,"p"),s(35,"\xBFYa tienes cuenta? "),i(36,"a",19),s(37,"Inicia sesi\xF3n aqu\xED"),o()()()()()),n&2){let c,_,C,b;t(7),m("formGroup",e.registroForm),t(4),x("error",((c=e.registroForm.get("nombre"))==null?null:c.invalid)&&((c=e.registroForm.get("nombre"))==null?null:c.touched)),t(),m("ngIf",e.getErrorMessage("nombre")),t(4),x("error",((_=e.registroForm.get("email"))==null?null:_.invalid)&&((_=e.registroForm.get("email"))==null?null:_.touched)),t(),m("ngIf",e.getErrorMessage("email")),t(4),x("error",((C=e.registroForm.get("password"))==null?null:C.invalid)&&((C=e.registroForm.get("password"))==null?null:C.touched)),t(),m("ngIf",e.getErrorMessage("password")),t(4),x("error",((b=e.registroForm.get("confirmPassword"))==null?null:b.invalid)&&((b=e.registroForm.get("confirmPassword"))==null?null:b.touched)),t(),m("ngIf",e.getErrorMessage("confirmPassword")),t(),m("ngIf",e.errorMessage),t(),m("ngIf",e.successMessage),t(),m("disabled",e.registroForm.invalid||e.isLoading),t(),m("ngIf",!e.isLoading),t(),m("ngIf",e.isLoading)}},dependencies:[E,w,N,k,F,S,I,L,R],styles:[".registro-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px;background:linear-gradient(135deg,var(--primary-color),var(--secondary-color))}.registro-card[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:12px;box-shadow:0 8px 32px #0000001a;padding:40px;width:100%;max-width:450px;border:1px solid var(--border-color)}.registro-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.registro-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-primary);margin:0 0 8px;font-size:28px;font-weight:600}.registro-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0;font-size:14px}.registro-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.registro-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:var(--text-primary);font-weight:500;font-size:14px}.registro-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid var(--border-color);border-radius:8px;font-size:16px;background:var(--input-bg);color:var(--text-primary);transition:all .3s ease}.registro-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px rgba(var(--primary-color-rgb),.1)}.registro-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%]{border-color:var(--error-color)}.registro-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--text-secondary)}.registro-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:var(--error-color);font-size:12px;margin-top:4px;display:flex;align-items:center;gap:4px}.registro-form[_ngcontent-%COMP%]   .error-message.global-error[_ngcontent-%COMP%]{background:rgba(var(--error-color-rgb),.1);padding:12px;border-radius:6px;margin-bottom:16px;font-size:14px}.registro-form[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{color:var(--success-color);background:rgba(var(--success-color-rgb),.1);padding:12px;border-radius:6px;margin-bottom:16px;font-size:14px;text-align:center}.registro-form[_ngcontent-%COMP%]   .registro-button[_ngcontent-%COMP%]{width:100%;padding:14px;background:var(--primary-color);color:#fff;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;margin-top:10px}.registro-form[_ngcontent-%COMP%]   .registro-button[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary-hover);transform:translateY(-1px)}.registro-form[_ngcontent-%COMP%]   .registro-button[_ngcontent-%COMP%]:disabled{background:var(--disabled-color);cursor:not-allowed;transform:none}.registro-footer[_ngcontent-%COMP%]{text-align:center;margin-top:24px;padding-top:20px;border-top:1px solid var(--border-color)}.registro-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0;font-size:14px}.registro-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:500}.registro-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 480px){.registro-container[_ngcontent-%COMP%]{padding:16px}.registro-card[_ngcontent-%COMP%]{padding:24px}.registro-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px}}"]});let r=l;return r})();export{X as RegistroComponent};
